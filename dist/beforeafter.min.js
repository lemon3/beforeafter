/*! For license information please see beforeafter.min.js.LICENSE.txt */
!function(){"use strict";!function(){function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}var n=function(t){return new Promise((function(e,n){var r=new Image;r.onload=function(){var t=r.naturalWidth,n=r.naturalHeight;e({width:t,height:n})},r.onerror=function(){n("error")},r.src=t}))},r=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return!1;if(0===(t="string"==typeof t?document.querySelectorAll(t):t).length)return!1;var n=void 0===t.length;return e?n?t:t[0]:n?[t]:t},i=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return i={passive:!1},!1}}))}catch(t){i=!1}var o=function(t,e,n){if(t=parseFloat(t,10),e=parseFloat(e,10),(n=parseFloat(n,10))<e){var r=n;n=e,e=r}return!isNaN(e)&&t<e?e:!isNaN(n)&&t>n?n:t},a=function(t,e,n,r){return function(t,e,n,r){if(e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.setAttribute(i,e[i]);if(n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t.style[o]=n[o]);return r&&(t.innerHTML=r),t}(document.createElement(t),e,n,r)},s={Quad:{easeIn:function(t){return Math.pow(t,2)},easeOut:function(t){return 1-Math.pow(1-t,2)}},Cubic:{easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return 1-Math.pow(1-t,3)}},Sine:{easeIn:function(t){return 1-Math.cos(t*Math.PI/2)},easeOut:function(t){return Math.sin(t*Math.PI/2)}},Elastic:{easeOut:function(t){var e=2*Math.PI/3;return 0===t||1===t?t:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1}}},l={autoInit:!0,beforeImage:null,afterImage:null,followMouse:!1,onlyHandleDraggable:!1,clickable:!1,snapToStart:!1,snapToStartDelay:250,afterOnTheRight:!1,handleMinDistance:0,dragElementClass:"beforeafter-handle",dragCallback:null,animateInDuration:1250,animateInEasing:s.Elastic.easeOut,animateInDelay:100,animateStartPos:40,startPos:50,animateDuration:250,animateEasing:s.Cubic.easeOut,beforeLabel:"",afterLabel:"",beforeDescription:"",afterDescription:"",showToggleButton:!1,toggleBeforeText:"show before",toggleAfterText:"show after"};function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(){u=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var o=e&&e.prototype instanceof b?e:b,a=Object.create(o.prototype),s=new A(r||[]);return i(a,"_invoke",{value:D(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var g="suspendedStart",m="suspendedYield",p="executing",v="completed",y={};function b(){}function w(){}function _(){}var E={};h(E,a,(function(){return this}));var L=Object.getPrototypeOf,P=L&&L(L(k([])));P&&P!==n&&r.call(P,a)&&(E=P);var T=_.prototype=b.prototype=Object.create(E);function O(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==c(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function D(e,n,r){var i=g;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===v){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=x(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===g)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=d(e,n,r);if("normal"===c.type){if(i=r.done?v:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=v,r.method="throw",r.arg=c.arg)}}}function x(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function k(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(c(e)+" is not iterable")}return w.prototype=_,i(T,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:w,configurable:!0}),w.displayName=h(_,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,h(t,l,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},O(S.prototype),h(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(f(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(T),h(T,l,"Generator"),h(T,a,(function(){return this})),h(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=k,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;j(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:k(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function h(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function p(t,e,n){return(e=v(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:String(e)}var y=[],b=["init","drag","update"],w=function(){function s(n,a){var l=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),p(this,"_dimensions",(function(){l.elementWidth=l.canvas.offsetWidth,l.elementOffsetLeft=l.offsetElements.map((function(t){return t.offsetLeft})).reduce((function(t,e){return t+e})),l.dragHandleWidth=l.dragHandle.offsetWidth,l.minLeftPos=l.elementOffsetLeft+l.settings.handleMinDistance-l.dragHandleWidth/2,l.maxLeftPos=l.elementOffsetLeft+l.elementWidth-l.dragHandleWidth/2-l.settings.handleMinDistance,l.oldElementWidth!==l.elementWidth&&(l.oldElementWidth=l.elementWidth,l.elementHeight=l.canvas.offsetHeight,l._setPosition(l.currentPercent,!0))})),p(this,"_onMouseOver",(function(t){t.stopPropagation(),l._stopAni(),l.element.classList.add("interacting")})),p(this,"_onMouseOut",(function(t){t.stopPropagation(),l.element.classList.remove("interacting"),l.settings.snapToStart&&l._snapToStart()})),p(this,"_onMouseMove",(function(t){l._stopAni();var e=l._getPos(t),n=l._calcLeftPercent(e.x);n=o(n,0,100),l.oldPercent=l.currentPercent,l._setPosition(n)})),p(this,"_onDragStart",(function(t){l.startPos=l._getPos(t),l.element.classList.add("interacting"),clearTimeout(l.snapTimeout),l._tapped(t),"touchstart"===t.type?(window.addEventListener("touchmove",l._onDrag,i),window.addEventListener("touchend",l._onDragEnd),l.settings.followMouse?l._removeFollowMouseEvents():l.dragElementTrigger.removeEventListener("mousedown",l._onDragStart)):"mousedown"===t.type&&(l.settings.followMouse||(window.addEventListener("mousemove",l._onDrag,!1),window.addEventListener("mouseup",l._onDragEnd,!1)),l.dragElementTrigger.removeEventListener("touchstart",l._onDragStart))})),p(this,"_onDrag",(function(t){var e=l._getPos(t),n=l._calcLeftPercent(e.x);if(l._stopAni(),l.oldPercent=l.currentPercent,l._moved=!0,"mousemove"!==t.type&&(t.preventDefault(),l.deltaX=Math.abs(l.startPos.x-e.x),l.deltaY=Math.abs(l.startPos.y-e.y),!l.dirDetected)){if(Math.abs(l.deltaY)>Math.abs(l.deltaX))return l.element.classList.remove("interacting"),void window.removeEventListener("touchmove",l._onDrag,i);l.element.classList.add("interacting"),l.dirDetected=!0}l._setPosition(n),l._triggerEvent(b[1],{percent:n})})),p(this,"_onDragEnd",(function(t){if(l.element.classList.remove("interacting"),"touchend"===t.type?(window.removeEventListener("touchmove",l._onDrag,i),window.removeEventListener("touchend",l._onDragEnd),setTimeout((function(){l.settings.followMouse?l._addFollowMouseEvents():l.dragElementTrigger.addEventListener("mousedown",l._onDragStart)}),1)):"mouseup"===t.type&&(window.removeEventListener("mousemove",l._onDrag,!1),window.removeEventListener("mouseup",l._onDragEnd,!1),l.dragElementTrigger.addEventListener("touchstart",l._onDragStart,i)),l.settings.snapToStart){var e=l._calcLeftPercent(l._getPos(t).x),n=Math.abs(e-l.currentPercent);l._moved||.5>n?l._snapToStart():l.snapTimeout=setTimeout((function(){l.oldPercent=e,l._snapToStart()}),l.settings.animateDuration+1)}l._moved=!1,l.dirDetected=!1})),p(this,"_tapped",(function(t){var e=l._calcLeftPercent(l._getPos(t).x);l._stopAni(),l.oldPercent=l.currentPercent,l._animateTo(e,l.settings.animateDuration)})),p(this,"toggleBeforeAfter",(function(t){t&&t.stopPropagation(),l._stopAni(),l._afterShown?l.showBefore():l.showAfter()})),!(n=r(n,!0)))return{error:!0};if(n.dataset.bainitialized)return{error:!0};n.dataset.bainitialized=!0,y.push(this),this.options=a,this.element=n;var c=function(n,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!n)return!1;if(void 0===r||void 0===n.dataset[r])return n.dataset;try{i=JSON.parse(n.dataset[r].replace(/'/g,'"'))}catch(t){}if("object"!==e(i)){i=n.dataset[r];var a={},s=(i=(i=i.replace(/[\\ \t\n\r]/g,"")).replace(/{?([^{])}?/g,"$1")).split(",");s.length>1?s.forEach((function(e){if(e){var n=(o=e.split(":"),s=2,function(t){if(Array.isArray(t))return t}(o)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(o,s)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(o,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1];"true"===(i=i.replace(/'/g,""))?i=!0:"false"===i&&(i=!1),a[r.replace(/'/g,"")]=i}var o,s})):a[r]=i,i=a}var l={},c=r.length;return Object.entries(n.dataset).forEach((function(t){if(t[0].toLowerCase().indexOf(r)>=0&&t[0].length>c){var e=t[0][c].toLowerCase()+t[0].substring(c+1);(null===o||o&&void 0!==o[e])&&(l[e]=t[1])}})),Object.assign(i,l)}(n,"beforeafter");if(this.settings=Object.assign({},s.defaults,c,a),this.images=this.element.querySelectorAll("img"),!(this.settings.beforeImage&&this.settings.afterImage||this.images&&this.images.length))return{error:!0};this.snapTimeout=null,this.element.classList.contains("beforeafter")||this.element.classList.add("beforeafter"),this.deltaX=0,this.deltaY=0,this.dirDetected=!1,this.eventFired={},this._registeredEventListeners=[],this.settings.autoInit&&this.init()}var l,c,f,v;return l=s,c=[{key:"_getPos",value:function(t){var e;return{x:(e=void 0!==t.pageX?t:t.touches[0]||t.changedTouches[0]).pageX,y:e.pageY}}},{key:"_createGui",value:function(){var t=this.settings;this.createdElements=[];var e,n,r,i,o="div",s=a(o,{class:"canvas"});this.createdElements.push(s);var l,c,u=!1;if(t.beforeImage||t.afterImage)u=!0,(e=a("img",{draggable:!1})).src=t.beforeImage,(n=a("img",{draggable:!1})).src=t.afterImage;else{var h=(l=this.originalElements=this.images,c=2,function(t){if(Array.isArray(t))return t}(l)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(l,c)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}(l,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());r=h[0],i=h[1],(e=r.cloneNode(!0)).setAttribute("draggable",!1),(n=i.cloneNode(!0)).setAttribute("draggable",!1)}var f,d=a(o,{class:"clipSlider"},{zIndex:2}),m=document.createDocumentFragment(),p=document.createDocumentFragment();if(m.appendChild(e),p.appendChild(n),""!==t.beforeLabel){var v=a(o,{class:"info-box left"});v.innerHTML=t.beforeLabel,(f=a(o,{class:"clipSlider"})).append(v),p.appendChild(f)}if(""!==t.afterLabel){var y=a(o,{class:"info-box right"});y.innerHTML=t.afterLabel,m.appendChild(y)}d.appendChild(m),u?(s.append(d),s.append(p),this.element.append(s)):(r.parentNode.replaceChild(d,r),i.remove(),function(t,e){if(!t||!e&&!t)return!1;if(t&&!e)return t;void 0===t[0]&&(t=[t]);var n=t[0],r=n.parentNode;r&&r.insertBefore(e,n),t.forEach((function(t){e.appendChild(t)}))}([d,p],s));var b=a(o,{class:t.dragElementClass},{zIndex:5}),w=a(o,{class:"overlay"},{zIndex:4}),_=a(o);if(b.appendChild(_),s.appendChild(w),s.appendChild(b),""!==t.beforeDescription||""!==t.afterDescription){var E=a(o,{class:"description"});E.innerHTML=t.beforeDescription,this.element.appendChild(E),this.createdElements.push(E),this.description=E}if(t.showToggleButton){var L=a(o,{class:"toggleButton"},{zIndex:5});L.innerHTML=this._buttonStartText,this.element.appendChild(L),this.createdElements.push(L),this.toggleBtn=L}this.element.style.visibility="visible",this.wrapper1=m,this.wrapper2=p,this.dragHandle=b,this.clip=f,this.clippingElement=d,this.canvas=s}},{key:"_removeAllEvents",value:function(){this.dragElementTrigger.removeEventListener("mousedown",this._onDragStart),this.dragElementTrigger.removeEventListener("touchstart",this._onDragStart,i),this.toggleBtn&&this.toggleBtn.removeEventListener("click",this.toggleBeforeAfter),window.removeEventListener("resize",this._dimensions)}},{key:"_addFollowMouseEvents",value:function(){this.canvas.addEventListener("mouseenter",this._onMouseOver),this.canvas.addEventListener("mouseleave",this._onMouseOut),this.canvas.addEventListener("mousemove",this._onMouseMove)}},{key:"_removeFollowMouseEvents",value:function(){this.canvas.removeEventListener("mouseenter",this._onMouseOver),this.canvas.removeEventListener("mouseleave",this._onMouseOut),this.canvas.removeEventListener("mousemove",this._onMouseMove)}},{key:"_addEventListeners",value:function(){this.settings.followMouse?(this._addFollowMouseEvents(),this.dragElementTrigger.addEventListener("touchstart",this._onDragStart,i)):(this.dragElementTrigger.addEventListener("mousedown",this._onDragStart),this.dragElementTrigger.addEventListener("touchstart",this._onDragStart,i)),this.toggleBtn&&this.toggleBtn.addEventListener("click",this.toggleBeforeAfter),window.addEventListener("resize",this._dimensions)}},{key:"_stopAni",value:function(){this.requestId&&(window.cancelAnimationFrame(this.requestId),this.requestId=void 0),this.timing.then=0,this.timing.curTime=0}},{key:"_renderLoop",value:function(){var t,e;e=(t=(new Date).getTime())-(this.timing.then||t),this.timing.curTime+=e,this.progress=this.timing.curTime/this._animationDuration,this.progress>1&&(this.progress=1);var n=this.easing(this.progress);this._setPosition(this.oldPercent+this._delta*n),this.timing.then=t,this.progress<1?this.requestId=window.requestAnimationFrame(this._renderLoop.bind(this)):this.oldPercent=this.currentPercent}},{key:"_animateTo",value:function(t,e,n){t=o(+t,0,100),this._delta=t-this.oldPercent,Math.abs(this._delta)<1||(e?(this._animationDuration=e,this.easing=n||this.settings.animateEasing,this.progress=0,this.timing.curTime=0,this._renderLoop()):this._setPosition(t))}},{key:"_snapToStart",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.settings.snapToStartDelay;this._stopAni(),this.snapTimeout=setTimeout((function(){t._animateTo(t.settings.startPos,t.settings.animateDuration,t.settings.animateEasing)}),e)}},{key:"_getOffsetElements",value:function(){var t=[this.element],e=this.element.offsetParent;if(!e)return t;do{if(t.push(e),!e.offsetParent)break;e=e.offsetParent}while("BODY"!==e.nodeName);return t}},{key:"_setToggleValues",value:function(t,e,n){this.toggleBtn&&(this.toggleBtn.innerHTML=e),this.description&&(this.description.innerHTML=n),this._afterShown=1===t}},{key:"_setPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t===this.currentPercent&&!e)return!1;this.currentPercent=t;var n,r=this.elementWidth*t*.01,i="rect(0 ".concat(r,"px ").concat(this.elementHeight,"px 0)"),o="rect(0 ".concat(this.elementWidth,"px ").concat(this.elementHeight,"px ").concat(r,"px)");this._clipFromLeft||(n=i,i=o,o=n),this.clip&&(this.clip.style.clipPath=o),this.clippingElement.style.clipPath=i,this.dragHandle.style.transform="translate(".concat(r,"px, 0)"),t>75&&!this._afterShown?this._setToggleValues(1,this.settings.toggleBeforeText,this.settings.afterDescription):t<25&&this._afterShown&&this._setToggleValues(0,this.settings.toggleAfterText,this.settings.beforeDescription),this._triggerEvent(b[2],{percent:t})}},{key:"_calcLeftPercent",value:function(t){return 100*((t=o(t,this.minLeftPos,this.maxLeftPos))+.5*this.dragHandleWidth-this.elementOffsetLeft)/this.elementWidth}},{key:"_calcLeftValue",value:function(t){return.01*o(t,0,100)*this.elementWidth+this.elementOffsetLeft-.5*this.dragHandleWidth}},{key:"_triggerEvent",value:function(t,e){var n={detail:d({instance:this},e)},r=new CustomEvent(t,n);this.element.dispatchEvent(r),this.eventFired[t]=r,function(t,e,n){var r=t.getAttribute("on + ".concat(e));new Function("e","{".concat(r,"}")).call(t,n)}(this.element,t,r)}},{key:"init",value:(f=u().mark((function t(){var e,r,i,o,a=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._initialized){t.next=2;break}return t.abrupt("return",this);case 2:return this._initialized=!0,e=this.settings,this._afterShown=!1,this._clipFromLeft=!0,this._buttonStartText=this.settings.toggleAfterText,e.afterOnTheRight||(r=e.afterDescription,e.afterDescription=e.beforeDescription,e.beforeDescription=r,i=e.toggleAfterText,e.toggleAfterText=e.toggleBeforeText,e.toggleBeforeText=i,this._afterShown=!0,this._buttonStartText=this.settings.toggleBeforeText,this._clipFromLeft=!1),this._createGui(),this.offsetElements=this._getOffsetElements(),this.timing={time:0,curTime:0},this.dragElementTrigger=this.canvas,e.onlyHandleDraggable&&(this.dragElementTrigger=this.dragHandle,e.clickable&&(this.canvas.addEventListener("mousedown",this._tapped),this.canvas.addEventListener("touchstart",this._tapped))),this._animationDuration=e.animateInDuration||0,e.startPos||(e.startPos=0),e.animateStartPos||(e.animateStartPos=0),this.currentPercent=this._animationDuration>0?e.animateStartPos:e.startPos,this.oldPercent=this.currentPercent,this.element.style.opacity=0,this._moved=!1,o=this.settings.beforeImage||this.images[0].src,t.next=23,n(o);case 23:this.imageDimensions=t.sent,this._dimensions(),this._setPosition(this.currentPercent),this.element.style.opacity=1,this._animationDuration>0&&this.settings.animateStartPos!==this.settings.startPos&&setTimeout((function(){return a._animateTo(a.settings.startPos,a._animationDuration,a.settings.animateInEasing)}),this.settings.animateInDelay),this._addEventListeners(),this._triggerEvent(b[0]);case 30:case"end":return t.stop()}}),t,this)})),v=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=f.apply(t,e);function o(t){h(i,n,r,o,a,"next",t)}function a(t){h(i,n,r,o,a,"throw",t)}o(void 0)}))},function(){return v.apply(this,arguments)})},{key:"addEventListener",value:function(t,e,n){if(b.indexOf(t)<0||"function"!=typeof e)return!1;this.element.addEventListener(t,e,n),this._registeredEventListeners.push({eventName:t,listener:e,option:n}),this.eventFired[t]&&e.call(this.element,this.eventFired[t])}},{key:"removeEventListener",value:function(t,e,n){this.element.removeEventListener(t,e,n)}},{key:"goto",value:function(t,e,n){return!isNaN(t)&&(t=o(+t,0,100))!==this.currentPercent&&(this.oldPercent=this.currentPercent,this._stopAni(),void this._animateTo(t,e,n))}},{key:"showAfter",value:function(){this.oldPercent=100,this._setPosition(100)}},{key:"showBefore",value:function(){this.oldPercent=0,this._setPosition(0)}},{key:"elem",get:function(){return this.element}},{key:"destroy",value:function(){if(this.element.removeAttribute("data-bainitialized"),void 0===this.createdElements)return!1;var t;if(this.createdElements)for(t=0;t<this.createdElements.length;t++)this.element.removeChild(this.createdElements[t]);if(this.originalElements)for(t=0;t<this.originalElements.length;t++)this.element.appendChild(this.originalElements[t]);this.createdElements=this.originalElements=[],this._removeAllEvents()}}],c&&m(l.prototype,c),Object.defineProperty(l,"prototype",{writable:!1}),s}();w.init=function(){return L||(L=!0,w.setupAll("[data-beforeafter]")),!0},w.setupAll=function(t,e){return!!(t=r(t))&&(t.forEach((function(t){if(t.dataset.bainitialized)return!1;new w(t,e)})),y)};var _,E,L=!1;w.destroy=function(){var t=y.length;return y.forEach((function(t){t.destroy()})),L=!1,y=[],t},w.defaults=l,_=w.init,E="DOMContentLoaded","complete"===document.readyState||"interactive"===document.readyState?(_(),document.removeEventListener(E,_)):document.addEventListener(E,_,!1)}()}();